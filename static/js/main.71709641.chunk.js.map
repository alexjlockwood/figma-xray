{"version":3,"sources":["icons/ComponentIcon.svg","icons/PageIcon.svg","icons/TextIcon.svg","workers/ComponentSummary.worker.ts","workers/InlineTextStyle.worker.ts","components/Elements.tsx","components/PersonalTokenForm.tsx","components/FileIDForm.tsx","components/Tabs.tsx","components/Count.tsx","components/NodeCard.tsx","styles.tsx","components/Report.tsx","../../figma-js/build/module/index.js","api.tsx","analysis/indexBuilder.tsx","ImageManager.tsx","components/File.tsx","components/App.tsx","serviceWorker.js","index.tsx"],"names":["module","exports","__webpack_require__","p","Worker","Input","styled","input","_templateObject","Label","label","_templateObject2","Field","div","_templateObject3","Button","button","_templateObject4","props","disabled","css","_templateObject5","secondary","_templateObject6","FormContainer","PersonalTokenForm_templateObject","Summary","_ref2","personalToken","onClick","react_default","a","createElement","SummaryContainer","PersonalTokenChangeLink","substr","PersonalTokenForm_templateObject2","span","PersonalTokenForm_templateObject3","Form","_ref3","onChange","onBlur","onFocus","useRef","htmlFor","autoComplete","spellCheck","name","value","e","target","ref","placeholder","PersonalTokenForm","_ref","_useState","useState","_useState2","Object","slicedToArray","editing","setEditing","FileIDForm_templateObject","FileIDForm","onSubmit","noTokenYet","fileID","setFileID","FileIDForm_FormContainer","preventDefault","type","Tabs","Tabs_templateObject","Tab","count","active","TabContainer","TabTitle","TabSubtitle","Tabs_templateObject2","Tabs_templateObject3","Tabs_templateObject4","Tabs_templateObject5","Count","Count_templateObject","NodeCard","node","imageManager","NodeCardContainer","NodeCardPath","PathDisplay","path","NodeCardName","src","textIcon","alt","LazyImage","nodeID","id","ComponentNodeCard","component","index","expandInstances","setExpandInstances","componentIcon","NodeCardInstanceCount","InstanceList","instances","_useState3","_useState4","url","setUrl","useEffect","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","getPreview","sent","stop","NodeCardImageContainer","srcSet","sizes","NodeCard_Loading","_ref5","InstanceListContainer","map","ins","i","key","paths","_ref6","pageIcon","join","NodeCard_templateObject","NodeCard_templateObject2","NodeCard_templateObject3","NodeCard_templateObject4","NodeCard_templateObject5","NodeCard_templateObject6","_templateObject7","NodeCardGrid","_templateObject8","Loading","LoadingStyle","_templateObject9","sorters","USAGE","b","NAME","localeCompare","InlineStyleSection","inlineTextStyleNodes","length","_usePagination","usePagination","_usePagination2","showCount","hasMorePages","nextPage","SectionContainer","SectionSubtitle","slice","MoreLink","href","fullCount","perPage","arguments","undefined","_useState5","_useState6","page","setPage","Section","subtitle","components","sort","sorted","_usePagination3","_usePagination4","Report_templateObject","Report_templateObject2","section","Report_templateObject3","Report","fileData","summary","currentTab","setCurrentTab","currentSort","setCurrentSort","LIBRARY","DOCUMENT","DELETED_FROM_DOCUMENT","__assign","assign","t","s","n","prototype","hasOwnProperty","call","apply","this","module_Client","opts","headers","accessToken","Authorization","X-Figma-Token","personalAccessToken","client","axios_default","create","baseURL","apiRoot","file","fileId","params","get","fileImages","ids","comments","postComment","post","teamProjects","teamId","projectFiles","projectId","fetchDocument","Promise","resolve","reject","Figma","then","data","catch","fetchImages","nodeIDs","scale","format","images","buildIndex","documentResponse","allComponentKeys","keys","forEach","k","emptyIndex","indexRecursion","pathMemo","componentId","push","newPathMemo","concat","children","child","document","DEBOUNCE_QUEUE_PROCESSING","ImageManager","classCallCheck","cache","queue","_debouncedProcessQueue","console","log","debounce","_processQueue","_enqueue","_this","promise","queueContents","time","_fetchImages","_","timeEnd","queuedImageRequest","find","File","setFileData","setIndex","setSummary","_useState7","_useState8","error","setError","_useState9","_useState10","loading","setLoading","_useState11","_useState12","setInlineTextStyleNodes","_useState13","window","title","_index","componentSummaryWorker","_summary","inlineTextStyleWorker","_inlineTextStyleNodes","ComponentSummaryWorker","promiseWork","terminate","InlineTextStyleWorker","loadEverything","request","message","DocumentName","DocumentLink","DocumentNameLabel","LoadingStatus","components_Report","Fragment","NONE","LOADING_DOCUMENT","LOADING_IMAGES","ANALYSING","h1","File_templateObject","File_templateObject2","File_templateObject3","worker","addEventListener","postMessage","Container","App_templateObject","App","setPersonalToken","handleURLChange","fileIDHashMatch","location","hash","match","handleFileIDChange","history","pushState","savedPersonalToken","localStorage","getItem","onpopstate","components_PersonalTokenForm","setItem","components_FileIDForm","BackLink","App_templateObject2","Boolean","hostname","GlobalStyle","createGlobalStyle","src_templateObject","ReactDOM","render","dist","components_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.71709641.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/ComponentIcon.483685cf.svg\";","module.exports = __webpack_public_path__ + \"static/media/PageIcon.6e637937.svg\";","module.exports = __webpack_public_path__ + \"static/media/TextIcon.b2843f21.svg\";","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"025f65461b7222f14529.worker.js\");\n};","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"384cce094c03a3146f87.worker.js\");\n};","import styled, { css } from \"styled-components\";\n\nexport const Input = styled.input`\n  padding: 0.75em;\n  border-radius: 0.25em;\n  border: 1px solid #ccc;\n  width: 100%;\n  font-family: source-code-pro, Menlo, Monaco, Consolas, \"Courier New\",\n    monospace;\n`;\nexport const Label = styled.label`\n  display: block;\n  font-weight: 700;\n  margin-bottom: 0.5em;\n`;\nexport const Field = styled.div`\n  margin-bottom: 1em;\n`;\n\ntype ButtonProps = {\n  secondary?: boolean;\n};\n\nexport const Button = styled.button<ButtonProps>`\n  padding: 0.75em 1em;\n  font-weight: bold;\n  border-radius: 0.25em;\n  background-color: #123;\n  ${props =>\n    props.disabled &&\n    css`\n      opacity: 0.2;\n    `}\n  color: white;\n  border: 1px solid #123;\n  ${props =>\n    props.secondary &&\n    css`\n      background-color: transparent;\n      color: #123;\n    `}\n`;\n","import React, { useState, useRef } from \"react\";\nimport { Field, Label, Input } from \"./Elements\";\nimport styled from \"styled-components\";\n\nexport const FormContainer = styled.div`\n  margin-bottom: 40px;\n`;\n\ntype OnSubmit = (personalToken: string) => void;\n\ntype FormProps = {\n  onChange: OnSubmit;\n  personalToken: string | null;\n};\n\ntype InnerFormProps = {\n  onChange: OnSubmit;\n  personalToken: string | null;\n  onBlur: () => void;\n  onFocus: () => void;\n};\n\nfunction PersonalTokenForm({ onChange, personalToken }: FormProps) {\n  const [editing, setEditing] = useState<boolean>(false);\n  return (\n    <FormContainer>\n      {!personalToken || editing ? (\n        <Form\n          onChange={onChange}\n          personalToken={personalToken}\n          onFocus={() => setEditing(true)}\n          onBlur={() => setEditing(false)}\n        />\n      ) : (\n        <Summary\n          personalToken={personalToken}\n          onClick={() => setEditing(true)}\n        />\n      )}\n    </FormContainer>\n  );\n}\n\nfunction Summary({\n  personalToken,\n  onClick\n}: {\n  personalToken: string | null;\n  onClick: () => void;\n}) {\n  return (\n    <SummaryContainer>\n      Personal Token:{\" \"}\n      <PersonalTokenChangeLink onClick={onClick}>\n        {personalToken && personalToken.substr(0, 5) + \"...\"}\n      </PersonalTokenChangeLink>\n    </SummaryContainer>\n  );\n}\n\nconst SummaryContainer = styled.div`\n  color: #999;\n`;\n\nconst PersonalTokenChangeLink = styled.span`\n  text-decoration: underline;\n  cursor: pointer;\n`;\n\nfunction Form({ onChange, personalToken, onBlur, onFocus }: InnerFormProps) {\n  const input = useRef<HTMLInputElement>(null);\n  return (\n    <Field>\n      <Label htmlFor=\"personalToken\">Personal Token</Label>\n      <Input\n        autoComplete=\"off\"\n        spellCheck={false}\n        name=\"personalToken\"\n        value={personalToken || \"\"}\n        onChange={e => onChange(e.target.value)}\n        onBlur={onBlur}\n        onFocus={onFocus}\n        ref={input}\n        placeholder=\"e.g. 12345-12345678-1234-1234-1234-123456789012\"\n      />\n      <p>\n        Generate a token in Figma's Account Settings page and paste it here.\n      </p>\n    </Field>\n  );\n}\n\nexport default PersonalTokenForm;\n","import React, { useState, SyntheticEvent } from \"react\";\nimport { Field, Label, Input, Button } from \"./Elements\";\nimport styled from \"styled-components\";\n\nexport const FormContainer = styled.div`\n  margin-bottom: 40px;\n`;\n\ntype OnSubmit = (personalToken: string) => void;\n\ntype FormProps = {\n  onSubmit: OnSubmit;\n  noTokenYet: boolean;\n};\n\nfunction FileIDForm({ onSubmit, noTokenYet }: FormProps) {\n  const [fileID, setFileID] = useState(\"\");\n\n  function handleSubmit(e: SyntheticEvent) {\n    e.preventDefault();\n    onSubmit(fileID);\n  }\n\n  return (\n    <FormContainer>\n      <form onSubmit={handleSubmit}>\n        <Field>\n          <Label htmlFor=\"personalToken\">File ID</Label>\n          <Input\n            autoComplete=\"off\"\n            spellCheck={false}\n            name=\"personalToken\"\n            value={fileID}\n            onChange={e => setFileID(e.target.value)}\n            placeholder=\"e.g. AaBbCcDdEeFfGg12345ABCDE\"\n          />\n          <p>Use the string of characters inside a Figma file's URL.</p>\n        </Field>\n        <Field>\n          <Button type=\"submit\" disabled={noTokenYet || !fileID}>\n            X-Ray this file\n          </Button>\n        </Field>\n      </form>\n    </FormContainer>\n  );\n}\n\nexport default FileIDForm;\n","import React from \"react\";\nimport styled, { css } from \"styled-components\";\nexport const Tabs = styled.div`\n  display: flex;\n  margin-bottom: 20px;\n`;\nexport function Tab({\n  name,\n  count,\n  onClick,\n  active\n}: {\n  name: string;\n  count?: number;\n  onClick: () => void;\n  active: boolean;\n}) {\n  return (\n    <TabContainer active={active} onClick={onClick}>\n      <TabTitle>{name}</TabTitle>\n      {count !== null ? <TabSubtitle>{count}</TabSubtitle> : null}\n    </TabContainer>\n  );\n}\ntype TabContainerProps = {\n  active: boolean;\n};\nconst TabContainer = styled.div<TabContainerProps>`\n  padding: 20px;\n  cursor: pointer;\n  border-radius: 0.5em;\n  margin-right: 20px;\n  background-color: #eee;\n  ${props =>\n    props.active &&\n    css`\n      background-color: #123;\n      color: white;\n    `}\n`;\nconst TabTitle = styled.div`\n  font-weight: 900;\n  margin-bottom: 0.5em;\n`;\nconst TabSubtitle = styled.div``;\n","import styled from \"styled-components\";\nexport const Count = styled.span`\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #ddd;\n  font-weight: bold;\n  padding: 0.2em 0.5em;\n`;\n","import React, { useState, useEffect } from \"react\";\nimport styled, { css } from \"styled-components\";\nimport componentIcon from \"../icons/ComponentIcon.svg\";\nimport pageIcon from \"../icons/PageIcon.svg\";\nimport textIcon from \"../icons/TextIcon.svg\";\nimport {\n  ComponentWithStats,\n  MaybeNodePath\n} from \"../analysis/componentSummary\";\nimport { Count } from \"./Count\";\nimport { NodeWithXRayData } from \"../analysis/findStyles\";\nimport { lightGrey, figmaComponentPurple } from \"../styles\";\nimport { Instance } from \"figma-js\";\nimport { Index } from \"../analysis/indexBuilder\";\nimport ImageManager from \"../ImageManager\";\n\nexport type ComponentProps = {\n  component: ComponentWithStats;\n  imageManager: ImageManager;\n  index: Index;\n};\n\nexport type NodeCardProps = {\n  node: NodeWithXRayData;\n  imageManager: ImageManager;\n};\n\nexport function NodeCard({ node, imageManager }: NodeCardProps) {\n  return (\n    <NodeCardContainer>\n      <NodeCardPath>\n        <PathDisplay path={node.path} />\n      </NodeCardPath>\n      <NodeCardName type=\"TEXT\">\n        <img src={textIcon} alt=\"Figma Text Icon\" />{\" \"}\n        {node.node.name.substr(0, 20)}\n      </NodeCardName>\n      <LazyImage imageManager={imageManager} nodeID={node.node.id} />\n    </NodeCardContainer>\n  );\n}\n\nexport function ComponentNodeCard({\n  component,\n  imageManager,\n  index\n}: ComponentProps) {\n  const [expandInstances, setExpandInstances] = useState<boolean>(false);\n  return (\n    <NodeCardContainer>\n      <NodeCardPath>\n        <PathDisplay path={component.path} />\n      </NodeCardPath>\n      <NodeCardName type=\"COMPONENT\">\n        <img src={componentIcon} alt=\"Figma Component Icon\" />{\" \"}\n        {component.name.substr(0, 20)}\n      </NodeCardName>\n      <LazyImage imageManager={imageManager} nodeID={component.id} />\n      <NodeCardInstanceCount\n        onClick={() => setExpandInstances(!expandInstances)}\n      >\n        <Count>{component.count}</Count>{\" \"}\n        {component.count === 0\n          ? \"instances\"\n          : component.count === 1\n          ? \"instance...\"\n          : \"instances...\"}\n      </NodeCardInstanceCount>\n      {expandInstances ? (\n        <InstanceList instances={component.instances} index={index} />\n      ) : null}\n    </NodeCardContainer>\n  );\n}\n\nfunction LazyImage({\n  nodeID,\n  imageManager\n}: {\n  nodeID: string;\n  imageManager: ImageManager;\n}) {\n  const [url, setUrl] = useState<string | null>(null);\n  useEffect(() => {\n    (async () => {\n      const url = await imageManager.getPreview(nodeID);\n      setUrl(url);\n    })();\n  }, [nodeID, imageManager]);\n  return (\n    <NodeCardImageContainer>\n      {url ? (\n        <img srcSet={url + \" 2w\"} sizes=\"1px\" src={url} alt=\"Node Preview\" />\n      ) : (\n        <Loading />\n      )}\n    </NodeCardImageContainer>\n  );\n}\n\nfunction InstanceList({\n  instances,\n  index\n}: {\n  instances: Array<Instance>;\n  index: Index;\n}) {\n  return (\n    <InstanceListContainer>\n      {instances.map((ins, i) => (\n        <PathDisplay key={i} path={index.paths[ins.id]} />\n      ))}\n    </InstanceListContainer>\n  );\n}\n\nfunction PathDisplay({ path }: { path: MaybeNodePath }) {\n  return path ? (\n    <div>\n      <img src={pageIcon} alt=\"Figma Page Icon\" />{\" \"}\n      {path.map(node => node.name).join(\" ▸ \")}\n    </div>\n  ) : null;\n}\n\nconst NodeCardContainer = styled.div`\n  margin-bottom: 20px;\n  margin-right: 20px;\n  padding: 20px;\n  border-radius: 3px;\n  background-color: white;\n  display: flex;\n  flex-direction: column;\n  box-shadow: rgba(25, 25, 25, 0.06) 0px 7px 15px 0px;\n`;\nconst NodeCardImageContainer = styled.div`\n  margin: 20px 0;\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  align-items: center;\n  img {\n    max-width: 200px;\n    max-height: 200px;\n  }\n`;\nconst NodeCardPath = styled.div`\n  color: ${lightGrey};\n  font-size: 85%;\n  margin-bottom: 10px;\n`;\nconst NodeCardName = styled.div<{ type: string }>`\n  /* font-weight: bold; */\n  color: ${lightGrey};\n  ${props =>\n    props.type === \"COMPONENT\" &&\n    css`\n      color: ${figmaComponentPurple};\n    `}\n`;\nconst NodeCardInstanceCount = styled.div`\n  cursor: pointer;\n  font-size: 85%;\n`;\n\nconst InstanceListContainer = styled.div`\n  font-size: 85%;\n  margin-top: 10px;\n  margin-left: 5px;\n`;\n\nexport const NodeCardGrid = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst Loading = () => <LoadingStyle>Loading...</LoadingStyle>;\n\nconst LoadingStyle = styled.div`\n  color: ${lightGrey};\n`;\n","export const lightGrey = \"#999\";\nexport const figmaComponentPurple = \"#7b67fb\";\n","import React, { useState, SyntheticEvent } from \"react\";\nimport styled from \"styled-components\";\n\nimport { FileData } from \"../api\";\n\nimport {\n  ComponentSummary,\n  ComponentWithStats\n} from \"../analysis/componentSummary\";\nimport { InlineTextStyleNodes } from \"../analysis/findStyles\";\nimport { Tabs, Tab } from \"./Tabs\";\nimport { ComponentNodeCard, NodeCard, NodeCardGrid } from \"./NodeCard\";\nimport { Index } from \"../analysis/indexBuilder\";\nimport ImageManager from \"../ImageManager\";\n\ntype ReportProps = {\n  fileID: string | null;\n  fileData: FileData;\n  summary: ComponentSummary | null;\n  inlineTextStyleNodes: InlineTextStyleNodes | null;\n  index: Index;\n  imageManager: ImageManager;\n};\n\ntype SectionProps = {\n  subtitle?: string;\n  components: Array<ComponentWithStats>;\n  sort: Sorts;\n  index: Index;\n  imageManager: ImageManager;\n};\n\ntype Tabs = \"LIBRARY\" | \"DOCUMENT\" | \"DELETED_FROM_DOCUMENT\" | \"INLINE_STYLES\";\ntype Sorts = \"NAME\" | \"USAGE\";\n\nfunction Report({\n  fileID,\n  fileData,\n  summary,\n  inlineTextStyleNodes,\n  index,\n  imageManager\n}: ReportProps) {\n  const [currentTab, setCurrentTab] = useState<Tabs>(\"LIBRARY\");\n  const [currentSort, setCurrentSort] = useState<Sorts>(\"USAGE\");\n\n  if (fileData === null || summary === null || fileID === null) {\n    return null;\n  }\n\n  return (\n    <div>\n      <Tabs>\n        <Tab\n          name=\"Library Components\"\n          active={currentTab === \"LIBRARY\"}\n          count={summary.LIBRARY.length}\n          onClick={() => {\n            setCurrentTab(\"LIBRARY\");\n          }}\n        />\n        <Tab\n          name=\"Local Components\"\n          active={currentTab === \"DOCUMENT\"}\n          count={summary.DOCUMENT.length}\n          onClick={() => setCurrentTab(\"DOCUMENT\")}\n        />\n        <Tab\n          name=\"Deleted Components\"\n          active={currentTab === \"DELETED_FROM_DOCUMENT\"}\n          count={summary.DELETED_FROM_DOCUMENT.length}\n          onClick={() => setCurrentTab(\"DELETED_FROM_DOCUMENT\")}\n        />\n        <Tab\n          name=\"Inline Styles\"\n          active={currentTab === \"INLINE_STYLES\"}\n          count={inlineTextStyleNodes ? inlineTextStyleNodes.length : 0}\n          onClick={() => setCurrentTab(\"INLINE_STYLES\")}\n        />\n      </Tabs>\n      {(currentTab === \"LIBRARY\" ||\n        currentTab === \"DOCUMENT\" ||\n        currentTab === \"DELETED_FROM_DOCUMENT\") && (\n        <Tabs>\n          <Tab\n            name=\"Sort by Usage\"\n            active={currentSort === \"USAGE\"}\n            onClick={() => setCurrentSort(\"USAGE\")}\n          />\n          <Tab\n            name=\"Sort by Name\"\n            active={currentSort === \"NAME\"}\n            onClick={() => setCurrentSort(\"NAME\")}\n          />\n        </Tabs>\n      )}\n\n      {currentTab === \"LIBRARY\" && (\n        <Section\n          subtitle=\"These are the components you've used from the team library.\"\n          components={summary.LIBRARY}\n          imageManager={imageManager}\n          sort={currentSort}\n          index={index}\n        />\n      )}\n      {currentTab === \"DOCUMENT\" && (\n        <Section\n          subtitle=\"If any are not used, consider deleting them.\"\n          components={summary.DOCUMENT}\n          imageManager={imageManager}\n          sort={currentSort}\n          index={index}\n        />\n      )}\n      {currentTab === \"DELETED_FROM_DOCUMENT\" && (\n        <Section\n          subtitle=\"Undiscoverable components. Consider restoring the master, or replace the instance.\"\n          components={summary.DELETED_FROM_DOCUMENT}\n          imageManager={imageManager}\n          sort={currentSort}\n          index={index}\n        />\n      )}\n      {currentTab === \"INLINE_STYLES\" &&\n        (inlineTextStyleNodes ? (\n          <InlineStyleSection\n            inlineTextStyleNodes={inlineTextStyleNodes}\n            imageManager={imageManager}\n          />\n        ) : (\n          \"Loading...\"\n        ))}\n    </div>\n  );\n}\n\nconst sorters = {\n  USAGE: (a: ComponentWithStats, b: ComponentWithStats): number =>\n    -1 * (a.count > b.count ? 1 : a.count < b.count ? -1 : 0),\n  NAME: (a: ComponentWithStats, b: ComponentWithStats): number =>\n    a.name.localeCompare(b.name)\n};\n\ntype InlineStyleSectionProps = {\n  inlineTextStyleNodes: InlineTextStyleNodes;\n  imageManager: ImageManager;\n};\n\nfunction InlineStyleSection({\n  inlineTextStyleNodes,\n  imageManager\n}: InlineStyleSectionProps) {\n  const count = inlineTextStyleNodes.length;\n  const [showCount, hasMorePages, nextPage] = usePagination(count);\n\n  return (\n    <SectionContainer>\n      <SectionSubtitle>\n        These text layers are not connected to any style. Consider defining new\n        styles or assigning to existing ones.\n      </SectionSubtitle>\n      <NodeCardGrid>\n        {count > 0\n          ? inlineTextStyleNodes\n              .slice(0, showCount)\n              .map(node => (\n                <NodeCard\n                  key={node.node.id}\n                  node={node}\n                  imageManager={imageManager}\n                />\n              ))\n          : \"None.\"}\n      </NodeCardGrid>\n      {hasMorePages && (\n        <MoreLink href=\"#\" onClick={nextPage}>\n          Show more\n        </MoreLink>\n      )}\n    </SectionContainer>\n  );\n}\n\nfunction usePagination(\n  fullCount: number,\n  perPage: number = 50\n): [number, boolean, (e: SyntheticEvent) => void] {\n  const [page, setPage] = useState<number>(1);\n  const showCount: number = page * perPage;\n  const hasMorePages: boolean = showCount < fullCount;\n  const nextPage = (e: SyntheticEvent): void => {\n    e.preventDefault();\n    setPage(page + 1);\n  };\n  return [showCount, hasMorePages, nextPage];\n}\n\nfunction Section({\n  subtitle,\n  components,\n  sort,\n  index,\n  imageManager\n}: SectionProps) {\n  const count = components.length;\n  const sorted = components.slice(0).sort(sorters[sort]);\n\n  const [showCount, hasMorePages, nextPage] = usePagination(count);\n\n  return (\n    <SectionContainer>\n      <SectionSubtitle>{subtitle}</SectionSubtitle>\n      <NodeCardGrid>\n        {count > 0\n          ? sorted\n              .slice(0, showCount)\n              .map(component => (\n                <ComponentNodeCard\n                  key={component.id}\n                  component={component}\n                  index={index}\n                  imageManager={imageManager}\n                />\n              ))\n          : \"None.\"}\n      </NodeCardGrid>\n      {hasMorePages && (\n        <MoreLink href=\"#\" onClick={nextPage}>\n          Show more\n        </MoreLink>\n      )}\n    </SectionContainer>\n  );\n}\n\nconst MoreLink = styled.a`\n  display: block;\n  padding: 20px;\n  background-color: #123;\n  color: white;\n  border-radius: 3px;\n  font-weight: bold;\n  text-decoration: none;\n  text-align: center;\n`;\n\nconst SectionSubtitle = styled.p`\n  margin: 10px 0 20px 0;\n  font-weight: 600;\n  padding: 10px;\n  border-left: 3px solid #123;\n`;\nconst SectionContainer = styled.section``;\n\nexport default Report;\n","var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport axios from 'axios';\nexport var Client = function Client(opts) {\n  var headers = opts.accessToken ? {\n    Authorization: \"Bearer \" + opts.accessToken\n  } : {\n    'X-Figma-Token': opts.personalAccessToken\n  };\n  var client = axios.create({\n    baseURL: \"https://\" + (opts.apiRoot || 'api.figma.com') + \"/v1/\",\n    headers: headers\n  });\n  return {\n    client: client,\n    file: function file(fileId, params) {\n      if (params === void 0) {\n        params = {};\n      }\n\n      return client.get(\"files/\" + fileId, {\n        params: params\n      });\n    },\n    fileImages: function fileImages(fileId, params) {\n      return client.get(\"images/\" + fileId, {\n        params: __assign({}, params, {\n          ids: params.ids.join(',')\n        })\n      });\n    },\n    comments: function comments(fileId) {\n      return client.get(\"files/\" + fileId + \"/comments\");\n    },\n    postComment: function postComment(fileId, params) {\n      return client.post(\"files/\" + fileId + \"/comments\", params);\n    },\n    teamProjects: function teamProjects(teamId) {\n      return client.get(\"teams/\" + teamId + \"/projects\");\n    },\n    projectFiles: function projectFiles(projectId) {\n      return client.get(\"projects/\" + projectId + \"/files\");\n    }\n  };\n};","import * as Figma from \"figma-js\";\n\nexport type FileData = Figma.FileResponse | null;\nexport type Images = {\n  [key: string]: string;\n};\nexport type StyleData = any;\nexport type StylesData = any;\n\nexport function fetchDocument(\n  fileID: string,\n  personalToken: string\n): Promise<FileData> {\n  const p = new Promise<FileData>((resolve, reject) => {\n    const client = Figma.Client({\n      personalAccessToken: personalToken\n    });\n    client\n      .file(fileID)\n      .then(({ data }) => {\n        resolve(data);\n      })\n      .catch(reject);\n  });\n  return p;\n}\n\nexport function fetchImages(\n  fileID: string,\n  personalToken: string,\n  nodeIDs: Array<string>\n): Promise<Images> {\n  const p = new Promise<Images>((resolve, reject) => {\n    const client = Figma.Client({\n      personalAccessToken: personalToken\n    });\n    client\n      .fileImages(fileID, { ids: nodeIDs, scale: 2, format: \"png\" })\n      .then(({ data }) => {\n        resolve(data.images);\n      })\n      .catch(reject);\n  });\n  return p;\n}\n\nexport function fetchStyle(\n  key: string,\n  personalToken: string\n): Promise<StyleData> {\n  const p = new Promise<StyleData>((resolve, reject) => {\n    const client = Figma.Client({\n      personalAccessToken: personalToken\n    });\n    client.client\n      .get(`styles/${key}`)\n      .then(({ data }) => {\n        resolve(data);\n      })\n      .catch(reject);\n  });\n  return p;\n}\n\nexport function fetchStyles(\n  teamID: string,\n  personalToken: string\n): Promise<StylesData> {\n  const p = new Promise<StylesData>((resolve, reject) => {\n    const client = Figma.Client({\n      personalAccessToken: personalToken\n    });\n    client.client\n      .get(`teams/${teamID}/styles`)\n      .then(({ data }) => {\n        resolve(data);\n      })\n      .catch(reject);\n  });\n  return p;\n}\n","import { FileResponse, Node, Instance } from \"figma-js\";\n\nexport type Index = {\n  paths: PathsIndex;\n  instances: InstancesIndex;\n};\nexport type NodePath = Array<Node>;\ntype PathsIndex = { [nodeID: string]: NodePath };\ntype InstancesIndex = { [componentID: string]: Array<Instance> };\n\n/**\n * Build:\n * - map of nodeId => full path for every node\n * - map of componentId => list of related instance nodes\n */\n\nexport function buildIndex(documentResponse: FileResponse): Index {\n  const allComponentKeys: InstancesIndex = {};\n  Object.keys(documentResponse.components).forEach(k => {\n    allComponentKeys[k] = [];\n  });\n\n  const emptyIndex = {\n    paths: {},\n    instances: allComponentKeys\n  };\n  const index = indexRecursion(documentResponse.document, emptyIndex);\n  return index;\n}\n\nfunction indexRecursion(\n  node: Node,\n  index: Index,\n  pathMemo: NodePath = []\n): Index {\n  // Every node we visit gets a top-level entry in the paths index.\n  index.paths[node.id] = pathMemo;\n\n  // If it's an instance, add this to the instance index, under its component id.\n  if (node.type === \"INSTANCE\") {\n    if (!(node.componentId in index.instances)) {\n      index.instances[node.componentId] = [];\n    }\n    index.instances[node.componentId].push(node);\n  }\n\n  // if the node has children, add the current node to a temporary path memo,\n  // and then recur this function for all children, but with the deeper path memo.\n  // We don't do this if its an instance as we don't want to look inside instances.\n  // they will be analysed by looking inside their parent component instead.\n  // NOTE: this probably means we're under-counting instances of components that have\n  // been swapped in as replacement children of an instance.\n\n  if (node.type !== \"INSTANCE\" && \"children\" in node) {\n    const newPathMemo = pathMemo.concat([node]);\n    node.children.forEach(child => indexRecursion(child, index, newPathMemo));\n  }\n\n  return index;\n}\n","import { fetchImages } from \"./api\";\nimport debounce from \"debounce\";\n\ntype QueuedImageRequest = {\n  nodeID: string;\n  resolve: (url: string) => void;\n  reject: (reason: any) => void;\n};\n\nconst DEBOUNCE_QUEUE_PROCESSING = 100;\n\nexport default class ImageManager {\n  personalToken: string;\n  fileID: string;\n  cache: { [nodeID: string]: string };\n  queue: Array<QueuedImageRequest>;\n  _debouncedProcessQueue: () => void;\n\n  constructor({\n    personalToken,\n    fileID\n  }: {\n    personalToken: string;\n    fileID: string;\n  }) {\n    this.personalToken = personalToken;\n    this.fileID = fileID;\n    this.cache = {};\n    this.queue = [];\n    console.log(\"Constructing ImageManager\");\n\n    this._debouncedProcessQueue = debounce(\n      this._processQueue,\n      DEBOUNCE_QUEUE_PROCESSING\n    );\n  }\n\n  async getPreview(nodeID: string) {\n    if (this.cache[nodeID]) {\n      return this.cache[nodeID];\n    }\n    const url = await this._enqueue(nodeID);\n    this.cache[nodeID] = url;\n    return url;\n  }\n\n  _enqueue(nodeID: string) {\n    const promise = new Promise<string>((resolve, reject) => {\n      this.queue.push({\n        nodeID,\n        resolve,\n        reject\n      });\n    });\n    this._debouncedProcessQueue();\n    return promise;\n  }\n\n  async _processQueue() {\n    if (this.queue.length === 0) {\n      return;\n    }\n    const queueContents = this.queue;\n    console.time(\"REQUESTING_IMAGES\");\n    this.queue = [];\n    const images = await this._fetchImages(queueContents.map(_ => _.nodeID));\n    console.timeEnd(\"REQUESTING_IMAGES\");\n    Object.keys(images).forEach(nodeID => {\n      const url = images[nodeID];\n      const queuedImageRequest =\n        queueContents && queueContents.find(_ => _.nodeID === nodeID);\n      if (queuedImageRequest) {\n        queuedImageRequest.resolve(url);\n      }\n    });\n  }\n\n  async _fetchImages(nodeIDs: string[]) {\n    return await fetchImages(this.fileID, this.personalToken, nodeIDs);\n  }\n}\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport Report from \"./Report\";\nimport { fetchDocument, FileData } from \"../api\";\nimport { ComponentSummary } from \"../analysis/componentSummary\";\nimport { InlineTextStyleNodes } from \"../analysis/findStyles\";\nimport { buildIndex, Index } from \"../analysis/indexBuilder\";\n\nimport ComponentSummaryWorker from \"../workers/ComponentSummary.worker.ts\";\nimport InlineTextStyleWorker from \"../workers/InlineTextStyle.worker.ts\";\nimport ImageManager from \"../ImageManager\";\n\ntype FileProps = {\n  fileID: string;\n  personalToken: string;\n};\n\ntype LoadingStatus =\n  | \"LOADING_DOCUMENT\"\n  | \"LOADING_IMAGES\"\n  | \"ANALYSING\"\n  | \"NONE\";\n\nexport default function File({ fileID, personalToken }: FileProps) {\n  const [fileData, setFileData] = useState<FileData>(null);\n  const [index, setIndex] = useState<Index | null>(null);\n  const [summary, setSummary] = useState<ComponentSummary | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] = useState<LoadingStatus>(\"NONE\");\n  const [\n    inlineTextStyleNodes,\n    setInlineTextStyleNodes\n  ] = useState<InlineTextStyleNodes | null>(null);\n  const [imageManager] = useState<ImageManager>(\n    () => new ImageManager({ personalToken, fileID })\n  );\n\n  useEffect(() => {\n    if (fileData) {\n      window.document.title = \"X-Ray: \" + fileData.name;\n    }\n    return function() {\n      window.document.title = \"X-Ray\";\n    };\n  }, [fileData]);\n\n  useEffect(() => {\n    const loadEverything = async () => {\n      setLoading(\"LOADING_DOCUMENT\");\n      setFileData(null);\n      setError(null);\n      console.time(\"FETCH_DOCUMENT\");\n      const fileData = await fetchDocument(fileID, personalToken);\n      setFileData(fileData);\n      console.timeEnd(\"FETCH_DOCUMENT\");\n\n      if (fileData) {\n        setLoading(\"ANALYSING\");\n        console.time(\"ANALYSIS\");\n\n        console.time(\"ANALYSIS_BUILD_INDEX\");\n        const index = buildIndex(fileData);\n        setIndex(index);\n        console.timeEnd(\"ANALYSIS_BUILD_INDEX\");\n\n        console.time(\"ANALYSIS_COMPONENT_SUMMARY\");\n        const componentSummaryWorker = new ComponentSummaryWorker();\n        const summary = await promiseWork<ComponentSummary>(\n          componentSummaryWorker,\n          { fileData, index }\n        );\n        setSummary(summary);\n        componentSummaryWorker.terminate();\n        console.timeEnd(\"ANALYSIS_COMPONENT_SUMMARY\");\n\n        console.time(\"ANALYSIS_INLINE_STYLE\");\n        const inlineTextStyleWorker = new InlineTextStyleWorker();\n        const inlineTextStyleNodes = await promiseWork<InlineTextStyleNodes>(\n          inlineTextStyleWorker,\n          { fileData, index }\n        );\n        setInlineTextStyleNodes(inlineTextStyleNodes);\n        inlineTextStyleWorker.terminate();\n        console.timeEnd(\"ANALYSIS_INLINE_STYLE\");\n\n        console.timeEnd(\"ANALYSIS\");\n\n        setLoading(\"NONE\");\n      } else {\n        setLoading(\"NONE\");\n      }\n    };\n    loadEverything().catch(e => {\n      setLoading(\"NONE\");\n      if (e.request) {\n        setError(e.message);\n      } else {\n        throw e;\n      }\n    });\n  }, [fileID, personalToken]);\n\n  return (\n    <div>\n      <DocumentName>\n        {fileData ? (\n          <DocumentLink\n            target=\"_blank\"\n            href={`https://www.figma.com/file/${fileID}`}\n          >\n            {fileData.name}\n          </DocumentLink>\n        ) : null}{\" \"}\n        <DocumentNameLabel>\n          <LoadingStatus loading={loading} error={error} />\n        </DocumentNameLabel>\n      </DocumentName>\n      {fileData && index ? (\n        <Report\n          fileID={fileID}\n          fileData={fileData}\n          summary={summary}\n          inlineTextStyleNodes={inlineTextStyleNodes}\n          index={index}\n          imageManager={imageManager}\n        />\n      ) : null}\n    </div>\n  );\n}\n\nfunction LoadingStatus({\n  loading,\n  error\n}: {\n  loading: LoadingStatus;\n  error: string | null;\n}) {\n  const map = {\n    NONE: null,\n    LOADING_DOCUMENT: \"Loading document...\",\n    LOADING_IMAGES: \"Loading images...\",\n    ANALYSING: \"Analysing document...\"\n  };\n  return <>{error ? error : map[loading]}</>;\n}\n\nconst DocumentName = styled.h1`\n  font-weight: 900;\n  margin-bottom: 40px;\n`;\nconst DocumentNameLabel = styled.span`\n  font-weight: 300;\n  color: #999;\n`;\nconst DocumentLink = styled.a`\n  color: inherit;\n`;\n\nfunction promiseWork<T>(worker: Worker, data: any): Promise<T> {\n  return new Promise<T>((resolve, reject) => {\n    worker.addEventListener(\"message\", e => {\n      resolve(e.data);\n    });\n    worker.postMessage(data);\n  });\n}\n","import React, { useState, useEffect } from \"react\";\nimport PersonalTokenForm from \"./PersonalTokenForm\";\nimport FileIDForm from \"./FileIDForm\";\nimport File from \"./File\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n  padding: 20px;\n`;\n\nfunction App() {\n  const [personalToken, setPersonalToken] = useState<string | null>(null);\n  const [fileID, setFileID] = useState<string | null>(null);\n\n  useEffect(() => {\n    const savedPersonalToken =\n      window.localStorage.getItem(\"personalToken\") || \"\";\n    if (savedPersonalToken) {\n      setPersonalToken(savedPersonalToken);\n    }\n\n    handleURLChange();\n    window.onpopstate = function() {\n      handleURLChange();\n    };\n  }, []);\n\n  function handleURLChange() {\n    const fileIDHashMatch = window.location.hash.match(/#\\/file\\/(\\w+)/);\n    if (fileIDHashMatch) {\n      setFileID(fileIDHashMatch[1]);\n    } else {\n      setFileID(null);\n    }\n  }\n\n  function handleTokenChange(personalToken: string) {\n    setPersonalToken(personalToken);\n    window.localStorage.setItem(\"personalToken\", personalToken);\n  }\n  function handleFileIDChange(fileID: string) {\n    setFileID(fileID);\n    if (fileID) {\n      window.history.pushState(null, \"\", `#/file/${fileID}`);\n    } else {\n      window.history.pushState(null, \"\", `#/`);\n    }\n  }\n\n  return (\n    <Container>\n      <PersonalTokenForm\n        personalToken={personalToken}\n        onChange={handleTokenChange}\n      />\n      {!fileID && (\n        <FileIDForm onSubmit={handleFileIDChange} noTokenYet={!personalToken} />\n      )}\n      {personalToken && fileID && (\n        <>\n          <BackLink onClick={() => handleFileIDChange(\"\")}>\n            Choose another file\n          </BackLink>\n          <File fileID={fileID} personalToken={personalToken} />\n        </>\n      )}\n    </Container>\n  );\n}\n\nexport default App;\n\nconst BackLink = styled.div`\n  display: inline-block;\n  text-decoration: underline;\n  margin-bottom: 20px;\n  cursor: pointer;\n`;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport { createGlobalStyle } from \"styled-components\";\nimport { Normalize } from \"styled-normalize\";\n\nconst GlobalStyle = createGlobalStyle`\n\n    * {\n        box-sizing: border-box;\n    }\n\n    body {\n        margin: 0;\n        font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", sans-serif;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n        color: #123;\n        font-weight: 300;\n        background-color: #f8f8f8;\n        font-size: 13px;\n    }\n\n    code {\n        font-family: source-code-pro, Menlo, Monaco, Consolas, \"Courier New\",\n            monospace;\n    }\n`;\n\nReactDOM.render(\n  <>\n    <Normalize />\n    <GlobalStyle />\n    <App />\n  </>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}